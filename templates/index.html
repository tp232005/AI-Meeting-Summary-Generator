<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MeetingSummarizer</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Syne:wght@400;700;800&display=swap" rel="stylesheet"/>
</head>
<body>
  <div class="noise"></div>

  <header class="site-header">
    <div class="logo">
      <span class="logo-icon">▣</span>
      <span class="logo-text">MeetingSummarizer</span>
    </div>
    <nav class="header-meta">
      <span class="badge">NLP · Extractive</span>
    </nav>
  </header>

  <main class="main-grid">

    <!-- ── Left: Form ── -->
    <section class="card form-card">
      <h1 class="card-title">Paste your<br/><em>meeting transcript</em></h1>
      <p class="card-sub">Drop in raw notes, auto-captions, or a typed transcript — we'll do the rest.</p>

      <form method="POST" action="/summarize" class="form">
        <div class="field">
          <label for="title">Meeting title</label>
          <input type="text" id="title" name="title" placeholder="Q2 Planning, Standup…" autocomplete="off"/>
        </div>

        <div class="field">
          <label for="transcript">Transcript</label>
          <textarea id="transcript" name="transcript" rows="12"
            placeholder="Paste transcript here — timestamps, speaker labels, and filler words will be cleaned automatically…"
            required></textarea>
          <span class="char-count" id="charCount">0 characters</span>
        </div>

        <div class="field field-row">
          <label>Summary length</label>
          <div class="toggle-group">
            <label class="toggle"><input type="radio" name="length" value="short"/><span>Short</span></label>
            <label class="toggle"><input type="radio" name="length" value="medium" checked/><span>Medium</span></label>
            <label class="toggle"><input type="radio" name="length" value="long"/><span>Long</span></label>
          </div>
        </div>

        <button type="submit" class="btn-submit">
          <span>Summarize</span>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
        </button>
      </form>
    </section>

    <!-- ── Right: Recent ── -->
    <section class="card recent-card">
      <h2 class="section-title">Recent summaries</h2>

      {% if recent %}
        <ul class="summary-list">
          {% for row in recent %}
          <li class="summary-item">
            <a href="/result/{{ row.id }}" class="summary-link">
              <span class="summary-title">{{ row.title }}</span>
              <span class="summary-meta">
                <span class="pill">{{ row.length }}</span>
                <span class="pill">{{ row.word_count }} words</span>
              </span>
              <span class="summary-date">{{ row.created_at }}</span>
            </a>
          </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="empty-state">No summaries yet — paste your first transcript on the left.</p>
      {% endif %}
    </section>

  </main>

  <script>
    const ta = document.getElementById('transcript');
    const cc = document.getElementById('charCount');
    ta.addEventListener('input', () => {
      cc.textContent = ta.value.length.toLocaleString() + ' characters';
    });
  </script>
</body>
</html>
